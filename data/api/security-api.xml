<ApiTests xmlns="http://labkey.org/query/xml">

    <test name="get group permissions" type="get">
        <url>security/Security%20API%20Test%20Project/getGroupPerms.view?</url>
        <response>
            {"container": {
            "path": "/Security API Test Project",
            "name": "Security API Test Project",
            "groups": [
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": true,
            "roles": [],
            "name": "Site Administrators",
            "effectivePermissions": [],
            "groups": [{
            "isSystemGroup": true,
            "name": "Developers",
            "id": -4,
            "isProjectGroup": false
            }],
            "id": -1,
            "type": "g",
            "isProjectGroup": false,
            "roleLabel": "No Permissions"
            },
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": false,
            "roles": [],
            "name": "Audit Group",
            "effectivePermissions": [],
            "groups": [],
            "id": 1153,
            "type": "g",
            "isProjectGroup": false,
            "roleLabel": "No Permissions"
            },
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": true,
            "roles": [],
            "name": "Developers",
            "effectivePermissions": [],
            "groups": [],
            "id": -4,
            "type": "g",
            "isProjectGroup": false,
            "roleLabel": "No Permissions"
            },
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": true,
            "roles": [],
            "name": "Guests",
            "effectivePermissions": [],
            "groups": [],
            "id": -3,
            "type": "g",
            "isProjectGroup": false,
            "roleLabel": "No Permissions"
            },
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": true,
            "roles": [],
            "name": "All Site Users",
            "effectivePermissions": [],
            "groups": [],
            "id": -2,
            "type": "g",
            "isProjectGroup": false,
            "roleLabel": "No Permissions"
            },
            {
            "role": "EDITOR",
            "permissions": 15,
            "isSystemGroup": false,
            "roles": ["org.labkey.api.security.roles.EditorRole"],
            "name": "testgroup1",
            "effectivePermissions": [
            "org.labkey.api.security.permissions.DeletePermission",
            "org.labkey.api.security.permissions.ReadPermission",
            "org.labkey.api.security.permissions.InsertPermission",
            "org.labkey.api.security.permissions.ReadSomePermission",
            "org.labkey.api.reports.permissions.EditSharedReportPermission",
            "org.labkey.api.study.permissions.SharedParticipantGroupPermission",
            "org.labkey.api.lists.permissions.ManagePicklistsPermission",
            "org.labkey.api.security.permissions.SampleWorkflowJobPermission",
            "org.labkey.api.security.permissions.UpdatePermission",
            "org.labkey.announcements.model.SecureMessageBoardReadPermission",
            "org.labkey.announcements.model.SecureMessageBoardRespondPermission",
            "org.labkey.api.security.permissions.UpdateSampleStatusPermission",
            "org.labkey.api.security.permissions.EditSharedViewPermission",
            "org.labkey.api.reports.permissions.ShareReportPermission"
            ],
            "groups": [],
            "id": 2088,
            "type": "g",
            "isProjectGroup": true,
            "roleLabel": "Editor"
            },
            {
            "role": "READER",
            "permissions": 1,
            "isSystemGroup": false,
            "roles": ["org.labkey.api.security.roles.ReaderRole"],
            "name": "testgroup2",
            "effectivePermissions": [
            "org.labkey.api.security.permissions.ReadPermission",
            "org.labkey.api.security.permissions.ReadSomePermission"
            ],
            "groups": [],
            "id": 2089,
            "type": "g",
            "isProjectGroup": true,
            "roleLabel": "Reader"
            },
            {
            "role": "NO_PERMISSIONS",
            "permissions": 0,
            "isSystemGroup": false,
            "roles": [],
            "name": "Users",
            "effectivePermissions": [],
            "groups": [],
            "id": 2087,
            "type": "g",
            "isProjectGroup": true,
            "roleLabel": "No Permissions"
            }
            ],
            "id": "261e35e3-6756-103a-94cb-b29d14b1c5c2",
            "isInheritingPerms": false
            }}
        </response>
    </test>

    <test name="groups for current user" type="get">
        <url>security/Security%20Api%20Test%20Project/getGroupsForCurrentUser.view?</url>
        <response>
            {"groups": [
                    {
                        "id": -4,
                        "name": "Developers",
                        "isSystemGroup": true,
                        "isProjectGroup": false
                    },
                    {
                        "id": -3,
                        "name": "Guests",
                        "isSystemGroup": true,
                        "isProjectGroup": false
                    },
                    {
                        "id": -2,
                        "name": "All Site Users",
                        "isSystemGroup": true,
                        "isProjectGroup": false
                    },
                    {
                        "id": -1,
                        "name": "Site Administrators",
                        "isSystemGroup": true,
                        "isProjectGroup": false
                    }
                ]
            }
        </response>
    </test>

    <test name="ensure login" type="get">
        <url>security/Security%20Api%20Test%20Project/ensureLogin.view?</url>
        <response>
            {"currentUser":
                {
                    "id": 1001,
                    "canDeleteOwn": "true",
                    "email": "security-api@clientapi.test",
                    "canDelete": "true",
                    "canUpdate": "true",
                    "isAdmin": "true",
                    "displayName": "security-api@clientapi.test",
                    "canInsert": "true",
                    "canUpdateOwn": "true"
                }
            }
        </response>
    </test>

</ApiTests>
